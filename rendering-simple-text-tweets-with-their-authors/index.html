<!DOCTYPE html>














<html lang="en">
  <head>
  <title>API Handyman | Rendering simple text tweets with their authors</title>
  <meta name="description" content="Let’s learn to use Twitter v2 API tweets lookup operations to render simple text tweets and their author just like Twitter does. We’ll learn a few things about API design and API documentation in general and Postman based API documentation in particular in the making. I hope this will give you some ideas for the design and documentation of your API.">
<meta name="keywords" content="API,Web API,Web Service">
<meta name="author" content="Arnaud Lauret">

<!-- Open Graph -->
<meta property="og:title"         content="Rendering simple text tweets with their authors"/>
<meta property="og:type"          content="article"/>
<meta property="og:description"   content="Let’s learn to use Twitter v2 API tweets lookup operations to render simple text tweets and their author just like Twitter does. We’ll learn a few things about API design and API documentation in general and Postman based API documentation in particular in the making. I hope this will give you some ideas for the design and documentation of your API."/>
<meta property="og:url"           content="https://apihandyman.io/rendering-simple-text-tweets-with-their-authors/"/>
<meta property="og:site_name"     content="API Handyman">
<meta property="og:image"         content="https://apihandyman.io/images/rendering-simple-text-tweets-with-their-authors/banner.png"/><meta property="article:published_time" content="2022-04-25"/><!-- Twitter Card -->
<meta name="twitter:card"         content="summary_large_image">
<meta name="twitter:site"         content="@apihandyman">
<meta name="twitter:creator"      content="@apihandyman" />
<meta name="twitter:title"        content="Rendering simple text tweets with their authors">
<meta name="twitter:url"          content="https://apihandyman.io/rendering-simple-text-tweets-with-their-authors/">
<meta name="twitter:description"  content="Let’s learn to use Twitter v2 API tweets lookup operations to render simple text tweets and their author just like Twitter does. We’ll learn a few things about API design and API documentation in general and Postman based API documentation in particular in the making. I hope this will give you some ideas for the design and documentation of your API.">
<meta name="twitter:image:src"    content="https://apihandyman.io/images/rendering-simple-text-tweets-with-their-authors/banner.png">

  
  
    
    
      















  
  
    
    
      








  
  













  
  


    
  




















  
  
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">



    
  

  
    
    
      










  
  















  
  


    
  

  

  
    
    
      








  
  













  
  


    
  

  

  

  
    
    
      










  
  















  
  


    
  

  
    
    
      












  
  
    
    
  
    
    
      










  
  















  
  


    
  
    
    
      










  
  















  
  


    
  
    
    
  

















  
  


    
  

  
    
    
      












  
  
    
    
  
    
    
  
    
    
      










  
  
    
    
  















  
  


    
  

















  
  


    
  

  
    
    
      










  
  
    
    
  















  
  


    
  

  

  
    
    
      










  
  
    
    
      








  
  













  
  


    
  















  
  


    
  

  

  

  

  
    
    
      









  
  














  
  


    
  

  


  
  
    
    
      















  
  
    
    
      








  
  













  
  


    
  




















  
  
<link rel="stylesheet" href="/css/bootstrap.min.css">



    
  

  
    
    
      










  
  















  
  
<link rel="stylesheet" href="/css/anchors.css">



    
  

  

  
    
    
      








  
  













  
  


    
  

  

  

  
    
    
      










  
  















  
  
<link rel="stylesheet" href="/css/main.css">



    
  

  
    
    
      












  
  
    
    
  
    
    
      










  
  















  
  
<link rel="stylesheet" href="/css/prism.css">
<link rel="stylesheet" href="/css/prism-synthwave84.css">



    
  
    
    
      










  
  















  
  
<link rel="stylesheet" href="/css/asciinema-player.css">



    
  
    
    
  

















  
  
<link rel="stylesheet" href="/css/code.css">



    
  

  
    
    
      












  
  
    
    
  
    
    
  
    
    
      










  
  
    
    
  















  
  


    
  

















  
  
<link rel="stylesheet" href="/css/bash.css">



    
  

  
    
    
      










  
  
    
    
  















  
  


    
  

  

  
    
    
      










  
  
    
    
      








  
  













  
  


    
  















  
  


    
  

  

  

  

  
    
    
      









  
  














  
  


    
  

  


  <link rel="alternate" type="application/rss+xml" title="API Handyman" href="/feed.xml">
</head>
  <body  data-spy="scroll" data-target="#toc">
    
<div class="main-navbar fixed-top  scrolled">
  <div class="container-lg">
    <nav class="navbar navbar-expand-lg">
      <a class="navbar-brand" href="/">API Handyman</a>
      
      <button class="navbar-toggler left-column-hider" type="button" data-toggle="collapse" data-target="#navbarNav"
        aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <img class="btn-icon" src="/images/commons/icons/menu.svg" >
      </button>
      <div class="collapse navbar-collapse flex-grow-1" id="navbarNav">
        <div class="navbar-nav">
          <li class="nav-item dropdown dropdown-blog d-desktop-only">
            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownBlog" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              Blog
            </a>
            <div class="dropdown-menu" aria-labelledby="navbarDropdownBlog">
              <a class="dropdown-item" href="/blog/">All content</a>
              <div class="dropdown-divider"></div>
              <a class="dropdown-item" href="/posts/">Posts</a>
              <a class="dropdown-item" href="/talks/">Talks & Podcasts</a>
            </div>
          </li>
          <a class="nav-item nav-link d-mobile-only" href="/blog/">Blog</a>
          <a class="nav-item nav-link nav-link-sub d-mobile-only" href="/posts/">Posts</a>
          <a class="nav-item nav-link nav-link-sub d-mobile-only" href="/talks/">Talks & Podcasts</a>
          <a class="nav-item nav-link" href="/toolbox/">Toolbox</a>
          <a class="nav-item nav-link" href="/about/">About</a>
          <div class="form-search">
    <input class="input-search" type="search" name="q" placeholder="Search" aria-label="Search">
    <button class="btn-search"><?xml version="1.0" encoding="UTF-8"?>
<svg width="26" height="26" version="1.1" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
 <path d="m85.207 79.375l-21.664-21.668c3.332-4.375 5.207-10 5.207-16.043 0-15-12.082-27.082-27.082-27.082s-27.086 12.086-27.086 27.086 12.082 27.082 27.082 27.082c6.043 0 11.457-1.875 16.043-5.207l21.668 21.668c0.83203 0.83203 1.875 1.25 2.918 1.25s2.082-0.41797 2.918-1.25c1.6641-1.668 1.6641-4.168-0.003907-5.8359zm-43.539-18.957c-10.418 0-18.75-8.332-18.75-18.75s8.332-18.75 18.75-18.75 18.75 8.332 18.75 18.75c0 10.414-8.3359 18.75-18.75 18.75z"/>
</svg>
</button>
</div>
          <a class="nav-item-book left-column-hider d-mobile-only" data-toggle="modal" data-target="#bookModal" role="button" ><div class="img"></div></a>
        </div>
      </div>
      
    </nav> <!-- class="navbar navbar-expand-md" -->
  </div> <!--  class="container" -->
</div> <!-- class="main-navbar fixed-top  scrolled" -->
    <div class="page-content-container">
      
















  <div class="row row-banner-small row-banner-small-">
    <div class="banner-small-container">
      <div class="banner-small-column-main">
        <img src="https://apihandyman.io/images/rendering-simple-text-tweets-with-their-authors/banner.png" class="img-fluid" alt="">
      </div>
    </div>
  </div>

<div class="row row-page-content">
  <div class="container-fluid container-lg">
    <div class="fade modal left-menu-hider left-menu-modal d-mobile-only"></div>
    <div class="row">
      
      <div class="page-column-left left-menu left-menu-hider">
        <div class="page-column-left-container">
          



<div class="left-book-ad left-book-ad-border d-desktop-only">
  <img src="/images/commons/book/book-left-menu-cropped.png" class="card-img" alt="The Design of Web APIs book cover">
  <div class="card-img-overlay message-cropped">
    <a class="stretched-link" data-toggle="modal" data-target="#bookModal" role="button" >
      <p class="card-text">Special offer on my book</p>
    </a>
  </div>
</div>
<a class="left-book-ad-small left-menu-hider d-mobile-only" data-toggle="modal" data-target="#bookModal" role="button">
  Special offer on my book
  <img src="/images/commons/book/title.png" class="img-fluid" alt="The Design of Web APIs book">
</a>

  
  <div class="nav-item dropdown dropright">
    <a class="nav-link dropdown-toggle series-title text-wrap" href="#" id="navbarSeriesDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
      Series
    </a>
    
<div class="dropdown-menu dropdown-menu-series rounded-0" aria-labelledby="navbarSerieDropdown">
  <div class="dropdown-header">Twitter API v2 Tips and Tricks</div>
  <div class="dropdown-divider"></div>
  
  
    
    
    <a class="dropdown-item selectable text-wrap" href="/what-can-we-learn-from-tweets-lookup-error-responses-of-twitter-v2-api/">What can we learn from tweets lookup error responses of Twitter v2 API?</a>
    

    
    
    <a class="dropdown-item active disabled text-wrap">Rendering simple text tweets with their authors</a>
    


</div>
  </div>
  
  <div class="flex-grow-1 overflow-auto m-0 left-menu-toggler" id="scrollable-toc">
    





  <nav class="nav flex-column" id="toc">
  
    
    
    
    
      
    
    
    
    
      
    
    
    
    
    
    
    
    
    
    
  
    
    
    
    
      
    
    
    
    
      
    
    
    
    
      
    
    
    
    
    
    
    
    
    
    
      
      
        
          <a class="nav-link toc-level-1" href="#twitter-v2-api-tweets-lookup">Twitter v2 API tweets lookup</a>
          
      
      
    
  
    
    
    
    
    
    
    
    
    
    
      
      
        
          <a class="nav-link toc-level-1" href="#prerequisites">Prerequisites</a>
          
      
      
    
  
    
    
    
    
      
    
    
    
    
    
    
    
    
    
    
      
      
        
          <a class="nav-link toc-level-1" href="#getting-the-same-data-as-twitter">Getting the same data as Twitter</a>
          
      
      
    
  
    
    
    
    
    
    
    
    
    
    
      
      
        <nav class="nav flex-column rounded-0">
          <a class="nav-link toc-level-2" href="#getting-a-tweet-with-default-data">Getting a tweet with default data</a>
      
      
    
  
    
    
    
    
      
    
    
    
    
    
    
    
    
    
    
      
      
        
          <a class="nav-link toc-level-2" href="#adding-tweets-creation-date-and-source-fields">Adding tweet’s creation date and source fields</a>
          
      
      
    
  
    
    
    
    
      
    
    
    
    
      
    
    
    
    
    
    
    
    
    
    
      
      
        
          <a class="nav-link toc-level-2" href="#expanding-author-data">Expanding author data</a>
          
      
      
    
  
    
    
    
    
      
    
    
    
    
    
    
    
    
    
    
      
      
        
          <a class="nav-link toc-level-2" href="#adding-users-profile-image-url-field">Adding user’s profile image URL field</a>
          
      
      
    
  
    
    
    
    
    
    
    
    
    
    
      
      
        
        </nav>
          <a class="nav-link toc-level-1" href="#processing-and-rendering-the-data">Processing and rendering the data</a>
        
      
      
    
  
    
    
    
    
    
    
    
    
    
    
      
      
        <nav class="nav flex-column rounded-0">
          <a class="nav-link toc-level-2" href="#rendering-a-one-line-tweet">Rendering a one line tweet</a>
      
      
    
  
    
    
    
    
      
    
    
    
    
    
    
    
    
    
    
      
      
        
          <a class="nav-link toc-level-2" href="#rendering-a-multiline-tweet">Rendering a multiline tweet</a>
          
      
      
    
  
    
    
    
    
    
    
    
    
    
    
      
      
        
          <a class="nav-link toc-level-2" href="#rendering-multiple-tweets-from-multiple-authors">Rendering multiple tweets from multiple authors</a>
          
      
      
    
  
    
    
    
    
      
    
    
    
    
    
    
    
    
    
    
      
      
        
        </nav>
          <a class="nav-link toc-level-1" href="#api-design-and-documentation-take-aways">API design and documentation take aways</a>
        
      
      
    
  
    
    
    
    
    
    
    
    
    
    
      
      
        <nav class="nav flex-column rounded-0">
          <a class="nav-link toc-level-2" href="#api-design">API Design</a>
      
      
    
  
    
    
    
    
    
    
    
    
    
    
      
      
        
          <a class="nav-link toc-level-2" href="#api-documentation">API Documentation</a>
          
      
      
    
  
    
    
    
    
    
    
    
    
    
    
      
      
        
        </nav>
          <a class="nav-link toc-level-1" href="#appendices">Appendices</a>
        
      
      
    
  
    
    
    
    
    
    
    
    
    
    
      
      
        <nav class="nav flex-column rounded-0">
          <a class="nav-link toc-level-2" href="#notes-about-the-collection">Notes about the collection</a>
      
      
    
  
    
    
    
    
      
    
    
    
    
      
    
    
    
    
      
    
    
    
    
      
    
    
    
    
      
    
    
    
    
      
    
    
    
    
      
  </nav>
  </div>

        </div>
      </div>
        
      
      <div class="page-column-main page-column-main-with-left">
        





















<div class="page-content-text anchors">
  
  
  
  
  
    
    
    <!-- First card with page title -->
    <div class="card-page-section page-section-title">
      <div class="body">
        
        <h5 class="surtitle">
Twitter API v2 Tips and Tricks Series
</h5>
        
        
        <h1 class="title">Rendering simple text tweets with their authors</h1>
        
        
        <h6 class="subtitle">By Arnaud Lauret, April 25, 2022</h6>
        <hr/>
        
        <p>Let’s learn to use Twitter v2 API tweets lookup operations to render simple text tweets and their author just like Twitter does. We’ll learn a few things about API design and API documentation in general and Postman based API documentation in particular in the making. I hope this will give you some ideas for the design and documentation of your API.</p>

<!--more-->

<div class="card series-toc">
  <div class="card-header series-toc-title">
    <h5 id="series">Twitter API v2 Tips and Tricks Series</h5>
  </div>
  <div class="row series-toc_content">
    <div class="col-md-7 series-toc-summary">
      <div class="card-body">
        <p class="card-text">
<p>This post is a “Twitter v2 API Tips And Tricks Post” in which I share with Postman collections the tips and tricks I learn while using Twitter v2 API.
You can either:</p>

<ul>
  <li>Read this post</li>
  <li>Read the collection documentation on <a href="https://www.postman.com/apihandyman/workspace/twitter-api-v2-tips-and-tricks/documentation/143378-6459d6b0-46fb-44fd-ace4-7f5e587a1d95">Postman network</a></li>
  <li>Use this <a href="https://god.gw.postman.com/run-collection/143378-6459d6b0-46fb-44fd-ace4-7f5e587a1d95?action=collection%2Ffork&amp;collection-url=entityId%3D143378-6459d6b0-46fb-44fd-ace4-7f5e587a1d95%26entityType%3Dcollection"><img src="/images/commons/run-in-postman.svg" alt="Run in Postman" /></a> button to fork the collection directly in Postman</li>
  <li>Get the collection from <a href="https://github.com/apihandyman/twitter-api-v2-tips-and-tricks/tree/main/rendering-simple-text-tweets-with-their-authors">Github</a> to import it in Postman. (Click on the “View complete collection documentation” link in lower right corner to see documentation in full screen after fork)</li>
</ul>
</p>
      </div>
    </div>
    <div class="col-md-5 series-toc-list border-left">
      
      <ul class="list-group list-group-flush">
        
          
          
          <li class="list-group-item"><a href="/what-can-we-learn-from-tweets-lookup-error-responses-of-twitter-v2-api/">What can we learn from tweets lookup error responses of Twitter v2 API?</a></li>
          
        
          
          
          <li class="list-group-item active">Rendering simple text tweets with their authors</li>
          
        
        
      </ul>
    </div>
  </div>
</div>

<p>We will concentrate on making the appropriate API calls and processing the data. We will not dive into the HandlebarJS + Bootstrap rendering, feel free to read this “<a href="https://apihandyman.io/how-to-use-bootstrap-in-postman-visualizer/">How to use Bootstrap in Postman Visualizer</a>” collection/post and look the tests scripts of the requests. You can also read more about how the collection works by looking at the Appendices section.</p>

<p>If you’re more interested in the learnings on API design and API documentation, you can jump directly to the API design and documentation take aways section.</p>


        
      </div>
    </div><!-- First card with page title END -->
      
    
  
    
    
    <!-- Next cards -->
    <div class="card-page-section page-section-not-title">
      <div class="card-body">
      
        <h1 id="twitter-v2-api-tweets-lookup">Twitter v2 API tweets lookup</h1>

<p>With Twitter v2 API, you can get tweets using <a href="https://developer.twitter.com/en/docs/twitter-api/tweets/lookup/introduction">the lookup operations</a> <code>GET /2/tweets/:tweetid</code> (single tweet) and <code>GET /2/tweets?ids=:tweetId1,tweetId2,...tweetId100</code> (multiple tweets). By requesting additional fields and the expansions of some of them, you can get the exact same data that are shown on Twitter website or mobile application. We’ll learn to use those operations to get the data needed and process them to render simple text tweets (without hastags, mentions, urls, medias, polls, …) and their author just like Twitter does.</p>


      </div>
    </div><!-- Next cards END -->
    
  
    
    
    <!-- Next cards -->
    <div class="card-page-section page-section-not-title">
      <div class="card-body">
      
        <h1 id="prerequisites">Prerequisites</h1>

<p>The collection requires an environment containing the variables defined in the table below. You can fork the following environments:</p>

<ul>
  <li><a href="https://www.postman.com/apihandyman/workspace/twitter-v2-api-tips-and-tricks/environment/143378-4f632c31-7cc7-43bb-a0b0-1dcce3edbec9">Rendering simple text tweets with their authors Mock</a> environment: Use a mock. It’s ready to use, there’s nothing to modify. You’ll be limited to the data the mock returns and won’t be able to modify the requests but all visualizations will work.</li>
  <li><a href="https://www.postman.com/apihandyman/workspace/twitter-v2-api-tips-and-tricks/environment/143378-5d07ba2d-7410-4670-b808-03657cb2ff04">Rendering simple text tweets with their authors Production</a> environment: Use the real Twitter v2 API. It requires you to set a Twitter API bearer token (see below) but you’ll be able to choose the tweets used in the requests and modify the requests.</li>
</ul>

<div class="alert alert-danger">
  <div class="row">
    <div class="col col-auto">
      <h4 class="alert-heading" style="font-size:3rem;">⛔</h4>
    </div>
    <div class="col"><p>️Never store API tokens in initial value, use the current value. Read <a href="https://blog.postman.com/how-to-use-api-keys/">How to use API Keys</a> to learn more.</p>
</div>
  </div>
</div>

<div class="table-wrapper"><table></div>
  <thead>
    <tr>
      <th><strong>VARIABLE</strong></th>
      <th><strong>DESCRIPTION</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>api_server_basepath</td>
      <td>The server and base path of the API. For the production Twitter it’s https://api.twitter.com/2 and for the mock it’s https://46c813b3-7bd4-4bf7-9eac-1f56f2ccc813.mock.pstmn.io</td>
    </tr>
    <tr>
      <td>twitter_token</td>
      <td>(Only for production environment) A Twitter API bearer token (Read <a href="https://developer.twitter.com/en/docs/authentication/oauth-2-0/bearer-tokens">Twitter API documentation</a> to get one) used in Authorization tab of the collection. Without this value <a href="https://apihandyman.io/we-always-forget-to-select-a-postman-environment/">you’ll get a surprise error message</a> when sending a request.</td>
    </tr>
  </tbody>
</table></div>


      </div>
    </div><!-- Next cards END -->
    
  
    
    
    <!-- Next cards -->
    <div class="card-page-section page-section-not-title">
      <div class="card-body">
      
        <h1 id="getting-the-same-data-as-twitter">Getting the same data as Twitter</h1>

<p>To achieve the following result, we’ll start by constructing a request to retrieve the data we need to render a simple text tweet and its author.</p>

<div class="image ">
    <figure class="figure">
        <img src="/images/rendering-simple-text-tweets-with-their-authors/01-rendered-tweet.png" class="figure-img img-fluid" /></figure>
</div>

<p>The pieces of data we need are:</p>

<ul>
  <li>The tweet’s text</li>
  <li>Its creation date</li>
  <li>The name of the application that created it</li>
  <li>The author’s username</li>
  <li>Their name</li>
  <li>Their image profile URL</li>
</ul>

<h2 id="getting-a-tweet-with-default-data">Getting a tweet with default data</h2>

<p>By default, <code>GET /tweets/:tweetId</code> only returns the <code>id</code> and the <code>text</code> of a tweet.</p>

<div class="card card-code text-white bg-dark border-dark">
   
  <div class="card-header">
    <div class="row m-0">
      <div class="col align-self-center">
        <p class="m-0 title">Request</p>
      </div>
      <div class="col col-auto pr-0">
        <div class="btn-group" role="group" aria-label="code snippet control">
          <a role="button" class="btn code-copy-btn border-0 rounded-0" aria-label="copy" data-toggle="tooltip" data-placement="top" title="Copy"><img class="btn-icon" src="/images/commons/icons/copy.svg" /></a>
          
        </div>
      </div>
    </div>
  </div>
  
  <div class="card-body">
    <div class="row m-0 pt-2 align-items-start" style="background-color: #2a2139;">
      <div class="col col-auto pl-3 pr-0 pb-1"><span class="badge http-get mr-2" style="font-size:1em;">GET</span><code class="language-http" style="background: transparent !important; overflow-wrap:break-word">https://api.twitter.com/2/tweets/:tweetId</code></div>
    </div>
     
    <div class="col col-auto pl-0 pr-0">
      <pre class="code-copy line-numbers language-"><code class="code-block"></code></pre>
    </div>
    
  </div>
</div>

<div class="card card-code text-white bg-dark border-dark">
  
  <div class="card-header">
    <div class="row m-0">
      <div class="col align-self-center">
        <p class="m-0 title">Response</p>
      </div>
      <div class="col col-auto pr-0">
        <div class="btn-group" role="group" aria-label="code snippet control">
          <a role="button" class="btn code-copy-btn border-0 rounded-0" aria-label="copy" data-toggle="tooltip" data-placement="top" title="Copy"><img class="btn-icon" src="/images/commons/icons/copy.svg" /></a>
          
        </div>
      </div>
    </div>
  </div>
  <div class="card-body">
    <pre class="language-json line-numbers code-copy" data-start="1"><code class="code-block">{
    &quot;data&quot;: {
        &quot;id&quot;: &quot;1511761169727565829&quot;,
        &quot;text&quot;: &quot;This is a single line tweet&quot;
    }
}</code></pre>
  </div>
</div>

<div class="alert alert-warning">
  <div class="row">
    <div class="col col-auto">
      <h4 class="alert-heading" style="font-size:3rem;">💡</h4>
    </div>
    <div class="col"><p>In any response of Twitter v2 API, the returned data are encapsulated in a <code>data</code> property. This approach allows adding additional data and metadata without mixing them with the “real” business/subject matter data. The Twitter API design is similar to the <a href="https://jsonapi.org/">JSON:API</a> format.</p>
</div>
  </div>
</div>

<h2 id="adding-tweets-creation-date-and-source-fields">Adding tweet’s creation date and source fields</h2>

<p>We can add the <code>tweet.fields</code> query parameter to request the other tweet’s data we need, hence <code>created_at</code> (creation date) and <code>source</code> (name of the application that sent the tweet).</p>

<div class="alert alert-primary">
  <div class="row">
    <div class="col col-auto">
      <h4 class="alert-heading" style="font-size:3rem;">🔗</h4>
    </div>
    <div class="col"><p>Check the <a href="https://www.postman.com/apihandyman/workspace/twitter-v2-api-tips-and-tricks/documentation/143378-8f12c1ed-f930-4e0d-8baf-c8a949910229">Guess how Tweets lookup parameters work</a> collection to discover how to guess the other possible values (and other parameters).</p>
</div>
  </div>
</div>

<div class="card card-code text-white bg-dark border-dark">
   
  <div class="card-header">
    <div class="row m-0">
      <div class="col align-self-center">
        <p class="m-0 title">Request</p>
      </div>
      <div class="col col-auto pr-0">
        <div class="btn-group" role="group" aria-label="code snippet control">
          <a role="button" class="btn code-copy-btn border-0 rounded-0" aria-label="copy" data-toggle="tooltip" data-placement="top" title="Copy"><img class="btn-icon" src="/images/commons/icons/copy.svg" /></a>
          
        </div>
      </div>
    </div>
  </div>
  
  <div class="card-body">
    <div class="row m-0 pt-2 align-items-start" style="background-color: #2a2139;">
      <div class="col col-auto pl-3 pr-0 pb-1"><span class="badge http-get mr-2" style="font-size:1em;">GET</span><code class="language-http" style="background: transparent !important; overflow-wrap:break-word">https://api.twitter.com/2/tweets/:tweetId?tweet.fields=created_at,source</code></div>
    </div>
     
    <div class="col col-auto pl-0 pr-0">
      <pre class="code-copy line-numbers language-"><code class="code-block"></code></pre>
    </div>
    
  </div>
</div>

<div class="card card-code text-white bg-dark border-dark">
  
  <div class="card-header">
    <div class="row m-0">
      <div class="col align-self-center">
        <p class="m-0 title">Response</p>
      </div>
      <div class="col col-auto pr-0">
        <div class="btn-group" role="group" aria-label="code snippet control">
          <a role="button" class="btn code-copy-btn border-0 rounded-0" aria-label="copy" data-toggle="tooltip" data-placement="top" title="Copy"><img class="btn-icon" src="/images/commons/icons/copy.svg" /></a>
          
        </div>
      </div>
    </div>
  </div>
  <div class="card-body">
    <pre class="language-json line-numbers code-copy" data-line="5-6" data-start="1"><code class="code-block">{
    &quot;data&quot;: {
        &quot;id&quot;: &quot;1511761169727565829&quot;,
        &quot;text&quot;: &quot;This is a single line tweet&quot;,
        &quot;created_at&quot;: &quot;2022-04-06T17:42:04.000Z&quot;,
        &quot;source&quot;: &quot;Twitter Web App&quot;
    }
}</code></pre>
  </div>
</div>

<div class="alert alert-warning">
  <div class="row">
    <div class="col col-auto">
      <h4 class="alert-heading" style="font-size:3rem;">💡</h4>
    </div>
    <div class="col"><p>Providing the possibility of selecting the field returned allows for reducing data volume and possibly the load on the server-side if the fields come from different subsystems. This is an approach that is quite useful but not often seen. It is similar to what JSON:API proposes with its <a href="https://jsonapi.org/format/#fetching-sparse-fieldsets">sparse fields</a> features.</p>
</div>
  </div>
</div>

<h2 id="expanding-author-data">Expanding author data</h2>

<p>The only author’s piece of data that is directly available in a tweet is their id (<code>author_id</code>). Hopefully, we don’t need a separate call to the <a href="https://developer.twitter.com/en/docs/twitter-api/users/lookup/api-reference">User lookup</a> <code>GET /users/:userId</code> operation. Indeed, we can request to expand resources linked to a tweet by using the <code>expansions</code> query parameter.</p>

<div class="alert alert-warning">
  <div class="row">
    <div class="col col-auto">
      <h4 class="alert-heading" style="font-size:3rem;">💡</h4>
    </div>
    <div class="col"><p>It’s pretty neat; it allows to get related data only when needed easily. Like with <code>tweet.fields</code>, it reduces data volume and possibly reduces response time and load on the server-side if the expanded elements come from other components.</p>
</div>
  </div>
</div>

<p>So to expand the author’s data, we put <code>author_id</code> in the <code>expansions</code> query parameter. It’s a comma-separated list; you can provide multiple values like with <code>tweet.fields</code>. Doing that will magically add the <code>author_id</code> field to the tweet. If you wish to get the <code>author_id</code> without expanding the author data, add it to the <code>tweet.fields</code> query parameter as we did in the previous request.</p>

<div class="card card-code text-white bg-dark border-dark">
   
  <div class="card-header">
    <div class="row m-0">
      <div class="col align-self-center">
        <p class="m-0 title">Request</p>
      </div>
      <div class="col col-auto pr-0">
        <div class="btn-group" role="group" aria-label="code snippet control">
          <a role="button" class="btn code-copy-btn border-0 rounded-0" aria-label="copy" data-toggle="tooltip" data-placement="top" title="Copy"><img class="btn-icon" src="/images/commons/icons/copy.svg" /></a>
          
        </div>
      </div>
    </div>
  </div>
  
  <div class="card-body">
    <div class="row m-0 pt-2 align-items-start" style="background-color: #2a2139;">
      <div class="col col-auto pl-3 pr-0 pb-1"><span class="badge http-get mr-2" style="font-size:1em;">GET</span><code class="language-http" style="background: transparent !important; overflow-wrap:break-word">https://api.twitter.com/2/tweets/:tweetId?tweet.fields=created_at,source&amp;expansions=author_id</code></div>
    </div>
     
    <div class="col col-auto pl-0 pr-0">
      <pre class="code-copy line-numbers language-"><code class="code-block"></code></pre>
    </div>
    
  </div>
</div>

<p>The expanded elements will be returned in the <code>includes</code> property. In the case of user expanded data, they will be located in the <code>includes.users</code> list. We’ll see in a later request how to process them.</p>

<div class="card card-code text-white bg-dark border-dark">
  
  <div class="card-header">
    <div class="row m-0">
      <div class="col align-self-center">
        <p class="m-0 title">Response</p>
      </div>
      <div class="col col-auto pr-0">
        <div class="btn-group" role="group" aria-label="code snippet control">
          <a role="button" class="btn code-copy-btn border-0 rounded-0" aria-label="copy" data-toggle="tooltip" data-placement="top" title="Copy"><img class="btn-icon" src="/images/commons/icons/copy.svg" /></a>
          
        </div>
      </div>
    </div>
  </div>
  <div class="card-body">
    <pre class="language-json line-numbers code-copy" data-line="7,9-17" data-start="1"><code class="code-block">{
    &quot;data&quot;: {
        &quot;id&quot;: &quot;1511761169727565829&quot;,
        &quot;text&quot;: &quot;This is a single line tweet&quot;,
        &quot;source&quot;: &quot;Twitter Web App&quot;,
        &quot;created_at&quot;: &quot;2022-04-06T17:42:04.000Z&quot;,
        &quot;author_id&quot;: &quot;2943613557&quot;
    },
    &quot;includes&quot;: {
        &quot;users&quot;: [
            {
                &quot;id&quot;: &quot;2943613557&quot;,
                &quot;name&quot;: &quot;API Handyman&quot;,
                &quot;username&quot;: &quot;apihandyman&quot;
            }
        ]
    }
}</code></pre>
  </div>
</div>

<h2 id="adding-users-profile-image-url-field">Adding user’s profile image URL field</h2>

<p>We only got a user’s default data when expanding the author’s data, hence their <code>id</code>, <code>username</code>, and <code>name</code>. But we need the author’s profile image URL. We can request it by using the <code>user.fields</code> query parameter. It works like the <code>tweet.fields</code> query parameter but for user resources (the author in our case).</p>

<p>We set its value to <code>profile_image_url</code> to get the last piece of data we need. This additional field will go into the element representing the author in <code>includes.users</code> list.</p>

<div class="card card-code text-white bg-dark border-dark">
   
  <div class="card-header">
    <div class="row m-0">
      <div class="col align-self-center">
        <p class="m-0 title">Request</p>
      </div>
      <div class="col col-auto pr-0">
        <div class="btn-group" role="group" aria-label="code snippet control">
          <a role="button" class="btn code-copy-btn border-0 rounded-0" aria-label="copy" data-toggle="tooltip" data-placement="top" title="Copy"><img class="btn-icon" src="/images/commons/icons/copy.svg" /></a>
          
        </div>
      </div>
    </div>
  </div>
  
  <div class="card-body">
    <div class="row m-0 pt-2 align-items-start" style="background-color: #2a2139;">
      <div class="col col-auto pl-3 pr-0 pb-1"><span class="badge http-get mr-2" style="font-size:1em;">GET</span><code class="language-http" style="background: transparent !important; overflow-wrap:break-word">https://api.twitter.com/2/tweets/:tweetId?tweet.fields=created_at,source&amp;expansions=author_id&amp;user.fields=profile_image_url</code></div>
    </div>
     
    <div class="col col-auto pl-0 pr-0">
      <pre class="code-copy line-numbers language-"><code class="code-block"></code></pre>
    </div>
    
  </div>
</div>

<div class="card card-code text-white bg-dark border-dark">
  
  <div class="card-header">
    <div class="row m-0">
      <div class="col align-self-center">
        <p class="m-0 title">Response</p>
      </div>
      <div class="col col-auto pr-0">
        <div class="btn-group" role="group" aria-label="code snippet control">
          <a role="button" class="btn code-copy-btn border-0 rounded-0" aria-label="copy" data-toggle="tooltip" data-placement="top" title="Copy"><img class="btn-icon" src="/images/commons/icons/copy.svg" /></a>
          
        </div>
      </div>
    </div>
  </div>
  <div class="card-body">
    <pre class="language-json line-numbers code-copy" data-line="15" data-start="1"><code class="code-block">{
    &quot;data&quot;: {
        &quot;id&quot;: &quot;1511761169727565829&quot;,
        &quot;text&quot;: &quot;This is a single line tweet&quot;,
        &quot;source&quot;: &quot;Twitter Web App&quot;,
        &quot;created_at&quot;: &quot;2022-04-06T17:42:04.000Z&quot;,
        &quot;author_id&quot;: &quot;2943613557&quot;
    },
    &quot;includes&quot;: {
        &quot;users&quot;: [
            {
                &quot;id&quot;: &quot;2943613557&quot;,
                &quot;name&quot;: &quot;API Handyman&quot;,
                &quot;username&quot;: &quot;apihandyman&quot;,
                &quot;profile_image_url&quot;: &quot;https://pbs.twimg.com/profile_images/966654273097490432/WPqaXZkf_normal.jpg&quot;
            }
        ]
    }
}</code></pre>
  </div>
</div>


      </div>
    </div><!-- Next cards END -->
    
  
    
    
    <!-- Next cards -->
    <div class="card-page-section page-section-not-title">
      <div class="card-body">
      
        <h1 id="processing-and-rendering-the-data">Processing and rendering the data</h1>

<p>Now we have all the data we need, let’s see how to process them to render simple text tweets and their authors à la Twitter.</p>

<h2 id="rendering-a-one-line-tweet">Rendering a one line tweet</h2>

<p>The directly related tweet data are pretty simple to get. The text (<code>text</code>), creation date (<code>created_at</code>), and name of the application that sent the tweet (<code>source</code>) are located in the <code>data</code> property that holds the requested tweet.</p>

<p>The only transformation done on these pieces of data is formating the <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO8601</a> <code>created_at</code> date from <code>2022-04-06T17:42:04.000Z</code> to a local format.</p>

<div class="alert alert-warning">
  <div class="row">
    <div class="col col-auto">
      <h4 class="alert-heading" style="font-size:3rem;">💡</h4>
    </div>
    <div class="col"><p>It is recommended to return dates with time precision (<code>2022-04-06T17:42:04.000Z</code>) only when needed (which is the case here) because dealing with timezones is not always simple. You’ll notice the Z timezone is used which is also recommended. Dates with time precision should always be returned using this UTC offset (<a href="https://en.wikipedia.org/wiki/Coordinated_Universal_Time">Coordinated universal time</a>).</p>
</div>
  </div>
</div>

<p>For the author’s data, you’ll need to get them from the <code>includes.users</code> list. Though there’s only one user, for now, it is recommended to select the user by looking for the one having an <code>id</code> equal to the tweet’s <code>author_id</code>.</p>

<p>After sending the request, click on the Visualizer button in the response to see this rendering.</p>

<div class="image ">
    <figure class="figure">
        <img src="/images/rendering-simple-text-tweets-with-their-authors/02-rendering-a-one-line-tweet.png" class="figure-img img-fluid" /></figure>
</div>

<div class="card card-code text-white bg-dark border-dark">
   
  <div class="card-header">
    <div class="row m-0">
      <div class="col align-self-center">
        <p class="m-0 title">Request</p>
      </div>
      <div class="col col-auto pr-0">
        <div class="btn-group" role="group" aria-label="code snippet control">
          <a role="button" class="btn code-copy-btn border-0 rounded-0" aria-label="copy" data-toggle="tooltip" data-placement="top" title="Copy"><img class="btn-icon" src="/images/commons/icons/copy.svg" /></a>
          
        </div>
      </div>
    </div>
  </div>
  
  <div class="card-body">
    <div class="row m-0 pt-2 align-items-start" style="background-color: #2a2139;">
      <div class="col col-auto pl-3 pr-0 pb-1"><span class="badge http-get mr-2" style="font-size:1em;">GET</span><code class="language-http" style="background: transparent !important; overflow-wrap:break-word">https://api.twitter.com/2/tweets/:tweetId?tweet.fields=created_at,source&amp;expansions=author_id&amp;user.fields=profile_image_url</code></div>
    </div>
     
    <div class="col col-auto pl-0 pr-0">
      <pre class="code-copy line-numbers language-"><code class="code-block"></code></pre>
    </div>
    
  </div>
</div>

<div class="card card-code text-white bg-dark border-dark">
  
  <div class="card-header">
    <div class="row m-0">
      <div class="col align-self-center">
        <p class="m-0 title">Response</p>
      </div>
      <div class="col col-auto pr-0">
        <div class="btn-group" role="group" aria-label="code snippet control">
          <a role="button" class="btn code-copy-btn border-0 rounded-0" aria-label="copy" data-toggle="tooltip" data-placement="top" title="Copy"><img class="btn-icon" src="/images/commons/icons/copy.svg" /></a>
          
        </div>
      </div>
    </div>
  </div>
  <div class="card-body">
    <pre class="language-json line-numbers code-copy" data-start="1"><code class="code-block">{
    &quot;data&quot;: {
        &quot;author_id&quot;: &quot;2943613557&quot;,
        &quot;created_at&quot;: &quot;2022-04-06T17:42:04.000Z&quot;,
        &quot;id&quot;: &quot;1511761169727565829&quot;,
        &quot;text&quot;: &quot;This is a single line tweet&quot;,
        &quot;source&quot;: &quot;Twitter Web App&quot;
    },
    &quot;includes&quot;: {
        &quot;users&quot;: [
            {
                &quot;name&quot;: &quot;API Handyman&quot;,
                &quot;username&quot;: &quot;apihandyman&quot;,
                &quot;profile_image_url&quot;: &quot;https://pbs.twimg.com/profile_images/966654273097490432/WPqaXZkf_normal.jpg&quot;,
                &quot;id&quot;: &quot;2943613557&quot;
            }
        ]
    }
}</code></pre>
  </div>
</div>

<div class="card card-code text-white bg-dark border-dark">
  
  <div class="card-header">
    <div class="row m-0">
      <div class="col align-self-center">
        <p class="m-0 title">Test script</p>
      </div>
      <div class="col col-auto pr-0">
        <div class="btn-group" role="group" aria-label="code snippet control">
          <a role="button" class="btn code-copy-btn border-0 rounded-0" aria-label="copy" data-toggle="tooltip" data-placement="top" title="Copy"><img class="btn-icon" src="/images/commons/icons/copy.svg" /></a>
          <a role="button" class="btn border-0 rounded-0 code-expandcollapse-btn" aria-label="expand or shrink" onclick="expandCollapseCode(this)" data-toggle="tooltip" data-placement="top" title="Expand/Shrink"><img class="btn-icon" src="/images/commons/icons/maximize.svg" /></a>
        </div>
      </div>
    </div>
  </div>
  <div class="card-body">
    <pre class="language-js line-numbers code-collapsed code-copy" data-line="14-24,37" data-start="1"><code class="code-block">// Note: the HTTP status test is located in collection&#39;s Tests script


const response = pm.response.json();
if(response.data !== undefined){

    /*-----------------------------------------------*/
    /* Getting needed data from Twitter API response */
    /*-----------------------------------------------*/


    // The tweet author&#39;s data are returned only if expansions contains author_id
    // The expanded data are located in include.users list
    const author = response.includes.users.find(user =&gt; user.id === response.data.author_id);
    const tweet = {
        text: response.data.text, // Always returned
        created_at: response.data.created_at, // Returned if requested in user.fields
        source: response.data.source, // Returned if requested in user.fields 
        author: {
            name: author.name, // Always returned
            username: author.username, //Always returned
            profile_image_url: author.profile_image_url // Returned if requested in user.fields
        }
    }

    /*------------*/
    /* Visualizer */
    /*------------*/

    // Preparing data for HandlebarJS template
    //----------------------------------------

    // The tweet data (shown in upper left card)
    const handlebarTweet =  {
        text: tweet.text,
        author: tweet.author,
        created_at: new Date(tweet.created_at).toLocaleString(), // Formatting ISO8601 date returned by the API
        source: tweet.source   
    }

    // The source of each tweet piece of data (shown in upper right card)
    const handlebarTweetDataSource = {
        text: &quot;data.text&quot;,
        created_at: &quot;new Date(data.created_at).toLocaleString()&quot;,
        source: &quot;data.source&quot;,
        author: {
            name: &quot;includes.users.find(user =&gt; user.id === data.author_id).name&quot;,
            username: &quot;includes.users.find(user =&gt; user.id === data.author_id).username&quot;,
            profile_image_url: `includes.users.find(
    user =&gt; user.id === data.author_id)
    .profile_image_url`
        }

    }

    // The raw json data returned by Twitter API
    const handlebarTweetJson = JSON.stringify(response, null, 2);

    // Bootstrap and prismsjs css and js
    const handlebarCssjs = {
        bootstrap: pm.collectionVariables.get(&quot;template_cssjs_bootstrap&quot;),
        prismsjs: pm.collectionVariables.get(&quot;template_cssjs_prismjs&quot;)
    }

    // Putting everything in a single object
    // that will be passed to HandlebarJS template
    const handlebarData = {
        tweet: handlebarTweet,
        tweetDataSource: handlebarTweetDataSource,
        tweetJson: handlebarTweetJson,
        cssjs: handlebarCssjs
    };

    // Handlebar HTML template
    const handlebarTemplate = `
        &lt;!-- CSS and JS --&gt;
        {{{cssjs.bootstrap}}}
        {{{cssjs.prismsjs}}}
        &lt;!-- Content --&gt;
        &lt;!-- Flex Container Start --&gt;
        &lt;div class=&quot;d-flex flex-column&quot; style=&quot;font-size: larger;&quot;&gt;
            &lt;!-- First Row Start --&gt;
            &lt;div class=&quot;d-flex flex-row mb-2&quot;&gt;
                &lt;!-- Rendered Data Card Start --&gt;
                &lt;div class=&quot;card me-2&quot;&gt;
                    &lt;h5 class=&quot;card-header&quot;&gt;Rendered Data&lt;/h5&gt;
                    &lt;div class=&quot;card-body&quot;&gt;
                        &lt;div class=&quot;d-flex flex-row align-items-stretch&quot;&gt;
                            &lt;div class=&quot;me-3&quot;&gt;
                                &lt;img src=&quot;{{tweet.author.profile_image_url}}&quot; class=&quot;rounded-circle&quot;&gt;
                            &lt;/div&gt;
                            &lt;div class=&quot;&quot;&gt;
                                &lt;h5 class=&quot;card-title&quot;&gt;{{tweet.author.name}}&lt;/h5&gt;
                                &lt;h6 class=&quot;card-subtitle mb-2 text-muted&quot;&gt;@{{tweet.author.username}}&lt;/h6&gt;
                                &lt;p class=&quot;card-text&quot;&gt;{{tweet.text}}&lt;/p&gt;
                                &lt;p class=&quot;card-text text-muted&quot;&gt;{{tweet.created_at}} - {{tweet.source}}&lt;/p&gt;
                            &lt;/div&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                &lt;/div&gt;
                &lt;!-- Rendered Data Card End --&gt;
                &lt;!-- Data Source Card Start --&gt;
                &lt;div class=&quot;card me-2 flex-grow-1&quot; &gt;
                    &lt;h5 class=&quot;card-header&quot;&gt;Data Source (JavaScript)&lt;/h5&gt;
                    &lt;div class=&quot;card-body&quot; style=&quot;background-image:linear-gradient(to bottom,#2a2139 75%,#34294f)&quot;&gt;
                        &lt;div class=&quot;d-flex flex-row align-items-stretch&quot;&gt;
                            &lt;div class=&quot;me-3&quot;&gt;
                                &lt;pre class=&quot;language-js p-0&quot; style=&quot;background: transparent !important&quot;&gt;&lt;code class=&quot;border-0 p-0&quot;&gt;{{tweetDataSource.author.profile_image_url}}&lt;/code&gt;&lt;/pre&gt;
                            &lt;/div&gt;
                            &lt;div class=&quot;&quot; &gt;
                                &lt;h5 class=&quot;card-title&quot;&gt;&lt;code class=&quot;language-js border-0&quot; style=&quot;background: transparent !important&quot;&gt;{{tweetDataSource.author.name}}&lt;/code&gt;&lt;/h5&gt;
                                &lt;h6 class=&quot;card-subtitle mb-2 text-muted&quot;&gt;@&lt;code class=&quot;language-js border-0&quot; style=&quot;background: transparent !important&quot;&gt;{{tweetDataSource.author.username}}&lt;/code&gt;&lt;/h6&gt;
                                &lt;p class=&quot;card-text&quot;&gt;&lt;code class=&quot;language-js border-0&quot; style=&quot;background: transparent !important&quot;&gt;{{tweetDataSource.text}}&lt;/code&gt;&lt;/p&gt;
                                &lt;p class=&quot;card-text text-muted&quot;&gt;&lt;code class=&quot;language-js border-0&quot; style=&quot;background: transparent !important&quot;&gt;{{tweetDataSource.created_at}}&lt;/code&gt; - &lt;code class=&quot;language-js border-0&quot; style=&quot;background: transparent !important&quot;&gt;{{data.source}}&lt;/code&gt;&lt;/p&gt;
                            &lt;/div&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                &lt;/div&gt;
                &lt;!-- Data Source Card End --&gt;
            &lt;/div&gt;
            &lt;!-- First Row End --&gt;
            &lt;!-- Second Row Start --&gt;
            &lt;div class=&quot;d-flex flex-row&quot;&gt;
                &lt;!-- Response JSON Data Card Start --&gt;
                &lt;div class=&quot;card me-2 mb-2 flex-grow-1&quot;&gt;
                    &lt;h5 class=&quot;card-header&quot;&gt;Response Data (JSON)&lt;/h5&gt;
                    &lt;div class=&quot;card-body p-0&quot;&gt;
                        &lt;pre class=&quot;m-0 p-0&quot;&gt;&lt;code class=&quot;language-json border-0&quot;&gt;{{{tweetJson}}}&lt;/code&gt;&lt;/pre&gt;
                    &lt;/div&gt;
                &lt;/div&gt;
                &lt;!-- Response JSON Data Card End --&gt;
            &lt;/div&gt;
            &lt;!-- Second Row End --&gt;
        &lt;/div&gt;
        &lt;!-- Flex Container End --&gt;
    `;

    // Set visualizer template and data
    pm.visualizer.set(handlebarTemplate, handlebarData);
}</code></pre>
  </div>
</div>

<h2 id="rendering-a-multiline-tweet">Rendering a multiline tweet</h2>

<p>If you replace the tweet id with one corresponding to a multiline tweet the rendering may not work very well, as all the text is shown on one line. In order to keep the newlines <code>\n</code> that may be present in the text field, you can add the style <code>white-space: pre-wrap</code> to the HTML tag holding that piece of data (in a true application you would do that using a separate CSS and not using an inline style).</p>

<div class="card card-code text-white bg-dark border-dark">
   
  <div class="card-header">
    <div class="row m-0">
      <div class="col align-self-center">
        <p class="m-0 title">Request</p>
      </div>
      <div class="col col-auto pr-0">
        <div class="btn-group" role="group" aria-label="code snippet control">
          <a role="button" class="btn code-copy-btn border-0 rounded-0" aria-label="copy" data-toggle="tooltip" data-placement="top" title="Copy"><img class="btn-icon" src="/images/commons/icons/copy.svg" /></a>
          
        </div>
      </div>
    </div>
  </div>
  
  <div class="card-body">
    <div class="row m-0 pt-2 align-items-start" style="background-color: #2a2139;">
      <div class="col col-auto pl-3 pr-0 pb-1"><span class="badge http-get mr-2" style="font-size:1em;">GET</span><code class="language-http" style="background: transparent !important; overflow-wrap:break-word">https://api.twitter.com/2/tweets/:tweetId?tweet.fields=author_id,created_at,geo,id,source,text&amp;expansions=author_id&amp;user.fields=profile_image_url</code></div>
    </div>
     
    <div class="col col-auto pl-0 pr-0">
      <pre class="code-copy line-numbers language-"><code class="code-block"></code></pre>
    </div>
    
  </div>
</div>

<div class="card card-code text-white bg-dark border-dark">
  
  <div class="card-header">
    <div class="row m-0">
      <div class="col align-self-center">
        <p class="m-0 title">Response</p>
      </div>
      <div class="col col-auto pr-0">
        <div class="btn-group" role="group" aria-label="code snippet control">
          <a role="button" class="btn code-copy-btn border-0 rounded-0" aria-label="copy" data-toggle="tooltip" data-placement="top" title="Copy"><img class="btn-icon" src="/images/commons/icons/copy.svg" /></a>
          
        </div>
      </div>
    </div>
  </div>
  <div class="card-body">
    <pre class="language-json line-numbers code-copy" data-line="3" data-start="1"><code class="code-block">{
    &quot;data&quot;: {
        &quot;text&quot;: &quot;This is a tweet\n- with\n- multiple\n- lines&quot;,
        &quot;created_at&quot;: &quot;2022-04-06T17:43:08.000Z&quot;,
        &quot;id&quot;: &quot;1511761439261925384&quot;,
        &quot;source&quot;: &quot;Twitter Web App&quot;,
        &quot;author_id&quot;: &quot;2943613557&quot;
    },
    &quot;includes&quot;: {
        &quot;users&quot;: [
            {
                &quot;profile_image_url&quot;: &quot;https://pbs.twimg.com/profile_images/966654273097490432/WPqaXZkf_normal.jpg&quot;,
                &quot;id&quot;: &quot;2943613557&quot;,
                &quot;username&quot;: &quot;apihandyman&quot;,
                &quot;name&quot;: &quot;API Handyman&quot;
            }
        ]
    }
}</code></pre>
  </div>
</div>

<p>After sending the request, click on the Visualizer button in the response to see this rendering.</p>

<div class="image ">
    <figure class="figure">
        <img src="/images/rendering-simple-text-tweets-with-their-authors/03-rendering-a-multiline-tweet.png" class="figure-img img-fluid" /></figure>
</div>

<h2 id="rendering-multiple-tweets-from-multiple-authors">Rendering multiple tweets from multiple authors</h2>

<p>When retrieving multiple tweets from different authors, it works the same. The only difference is that when using <code>GET /tweets</code> the data field becomes a list to hold more than one tweet. We just have to go through that list and process each element just like we did with a single tweet.</p>

<div class="card card-code text-white bg-dark border-dark">
   
  <div class="card-header">
    <div class="row m-0">
      <div class="col align-self-center">
        <p class="m-0 title">Request</p>
      </div>
      <div class="col col-auto pr-0">
        <div class="btn-group" role="group" aria-label="code snippet control">
          <a role="button" class="btn code-copy-btn border-0 rounded-0" aria-label="copy" data-toggle="tooltip" data-placement="top" title="Copy"><img class="btn-icon" src="/images/commons/icons/copy.svg" /></a>
          
        </div>
      </div>
    </div>
  </div>
  
  <div class="card-body">
    <div class="row m-0 pt-2 align-items-start" style="background-color: #2a2139;">
      <div class="col col-auto pl-3 pr-0 pb-1"><span class="badge http-get mr-2" style="font-size:1em;">GET</span><code class="language-http" style="background: transparent !important; overflow-wrap:break-word">https://api.twitter.com/2/tweets?ids={{tweet_id_text}},{{tweet_id_text_multiline}},{{tweet_id_other_author}}&amp;tweet.fields=author_id,created_at,geo,id,source,text&amp;expansions=author_id&amp;user.fields=profile_image_url</code></div>
    </div>
     
    <div class="col col-auto pl-0 pr-0">
      <pre class="code-copy line-numbers language-"><code class="code-block"></code></pre>
    </div>
    
  </div>
</div>

<p>In the provided example, there are 3 tweets from 2 different authors in the list. That means the <code>includes.users</code> list now contains the data for 2 authors, but it does not affect the way we look for their data. Looking for the user whose <code>id</code> matches some <code>author_id</code> works the same.</p>

<div class="card card-code text-white bg-dark border-dark">
  
  <div class="card-header">
    <div class="row m-0">
      <div class="col align-self-center">
        <p class="m-0 title">Response</p>
      </div>
      <div class="col col-auto pr-0">
        <div class="btn-group" role="group" aria-label="code snippet control">
          <a role="button" class="btn code-copy-btn border-0 rounded-0" aria-label="copy" data-toggle="tooltip" data-placement="top" title="Copy"><img class="btn-icon" src="/images/commons/icons/copy.svg" /></a>
          <a role="button" class="btn border-0 rounded-0 code-expandcollapse-btn" aria-label="expand or shrink" onclick="expandCollapseCode(this)" data-toggle="tooltip" data-placement="top" title="Expand/Shrink"><img class="btn-icon" src="/images/commons/icons/maximize.svg" /></a>
        </div>
      </div>
    </div>
  </div>
  <div class="card-body">
    <pre class="language-json line-numbers code-collapsed code-copy" data-start="1"><code class="code-block">{
    &quot;data&quot;: [
        {
            &quot;text&quot;: &quot;This is a single line tweet&quot;,
            &quot;source&quot;: &quot;Twitter Web App&quot;,
            &quot;id&quot;: &quot;1511761169727565829&quot;,
            &quot;created_at&quot;: &quot;2022-04-06T17:42:04.000Z&quot;,
            &quot;author_id&quot;: &quot;2943613557&quot;
        },
        {
            &quot;text&quot;: &quot;This is a tweet\n- with\n- multiple\n- lines&quot;,
            &quot;source&quot;: &quot;Twitter Web App&quot;,
            &quot;id&quot;: &quot;1511761439261925384&quot;,
            &quot;created_at&quot;: &quot;2022-04-06T17:43:08.000Z&quot;,
            &quot;author_id&quot;: &quot;2943613557&quot;
        },
        {
            &quot;text&quot;: &quot;I’m on the verge of starting a new blog about non API stuff such as my Reaper/Midi/Helix tinkering (that would at help me not to forget obscure configuration stuff that is not easily found)&quot;,
            &quot;source&quot;: &quot;Twitter for iPhone&quot;,
            &quot;id&quot;: &quot;1291806136774074368&quot;,
            &quot;created_at&quot;: &quot;2020-08-07T18:39:18.000Z&quot;,
            &quot;author_id&quot;: &quot;1327524403&quot;
        }
    ],
    &quot;includes&quot;: {
        &quot;users&quot;: [
            {
                &quot;username&quot;: &quot;apihandyman&quot;,
                &quot;name&quot;: &quot;API Handyman&quot;,
                &quot;profile_image_url&quot;: &quot;https://pbs.twimg.com/profile_images/966654273097490432/WPqaXZkf_normal.jpg&quot;,
                &quot;id&quot;: &quot;2943613557&quot;
            },
            {
                &quot;username&quot;: &quot;arno_di_loreto&quot;,
                &quot;name&quot;: &quot;Arnaud Lauret&quot;,
                &quot;profile_image_url&quot;: &quot;https://pbs.twimg.com/profile_images/1342523325969477632/AuqZ5guV_normal.jpg&quot;,
                &quot;id&quot;: &quot;1327524403&quot;
            }
        ]
    }
}</code></pre>
  </div>
</div>

<div class="alert alert-warning">
  <div class="row">
    <div class="col col-auto">
      <h4 class="alert-heading" style="font-size:3rem;">💡</h4>
    </div>
    <div class="col"><p>Having put the expanded author on the tweet is a very good design approach. It can greatly reduce the data volume in Twitter’s use case. Imagine retrieving a hundred tweets sent by a single person. Without that design, the data volume would be augmented by 99 x the author’s data volume. The downside is that some work is needed on the consumer side to put everything together, but it’s not that complicated to do. There’s a balance to find between providing ready-to-use data and data volume/server load, in this case, it’s pretty good.</p>
</div>
  </div>
</div>

<div class="card card-code text-white bg-dark border-dark">
  
  <div class="card-header">
    <div class="row m-0">
      <div class="col align-self-center">
        <p class="m-0 title">Test script</p>
      </div>
      <div class="col col-auto pr-0">
        <div class="btn-group" role="group" aria-label="code snippet control">
          <a role="button" class="btn code-copy-btn border-0 rounded-0" aria-label="copy" data-toggle="tooltip" data-placement="top" title="Copy"><img class="btn-icon" src="/images/commons/icons/copy.svg" /></a>
          <a role="button" class="btn border-0 rounded-0 code-expandcollapse-btn" aria-label="expand or shrink" onclick="expandCollapseCode(this)" data-toggle="tooltip" data-placement="top" title="Expand/Shrink"><img class="btn-icon" src="/images/commons/icons/maximize.svg" /></a>
        </div>
      </div>
    </div>
  </div>
  <div class="card-body">
    <pre class="language-js line-numbers code-collapsed code-copy" data-line="10-28" data-start="1"><code class="code-block">// Note: the HTTP status test is located in collection&#39;s Tests script

const response = pm.response.json();
if(response.data !== undefined){

    /*-----------------------------------------------*/
    /* Getting needed data from Twitter API response */
    /*-----------------------------------------------*/

    const tweets = [];
    // When using GET /tweets, response.data is a list
    response.data.forEach(dataItem =&gt; {
        // The tweet author&#39;s data are returned only if expansions contains author_id
        // The expanded data are located in include.users list at root level
        // (that means includes are not at each tweet level)
        const author = response.includes.users.find(user =&gt; user.id === dataItem.author_id);
        const tweet = {
            text: dataItem.text, // Always returned
            created_at: dataItem.created_at, // Returned if requested in user.fields
            source: dataItem.source, // Returned if requested in user.fields 
            author: {
                name: author.name, // Always returned
                username: author.username, //Always returned
                profile_image_url: author.profile_image_url // Returned if requested in user.fields
            }
        }
        tweets.push(tweet);
    });

    /*------------*/
    /* Visualizer */
    /*------------*/

    // Preparing data for HandlebarJS template
    //----------------------------------------

    const handlebarTweetsAndDataSources = [];
    tweets.forEach(function callback(tweet,index){
        // The tweets data (shown in first column cards)
        const handlebarTweet = {
            text: tweet.text,
            author: tweet.author,
            created_at: new Date(tweet.created_at).toLocaleString(), // Formatting ISO8601 date returned by the API
            source: tweet.source   
        };
        // The source of each tweet piece of data (shown in upper right card)
        const handlebarTweetDataSource = {
            text: `data[${index}].text`,
            created_at: `new Date(data[${index}].created_at).toLocaleString()`,
            source: `data[${index}].source`,
            author: {
                name: `includes.users.find(user =&gt; user.id === data[${index}].author_id).name`,
                username: `includes.users.find(user =&gt; user.id === data[${index}].author_id).username`,
                profile_image_url: `includes.users.find(
    user =&gt; user.id === data[${index}].author_id)
    .profile_image_url`
            }
        };
        handlebarTweetsAndDataSources.push({
            tweet: handlebarTweet,
            tweetDataSource: handlebarTweetDataSource
        })
    });
    
    // The raw json data returned by Twitter API
    const handlebarTweetsJson = JSON.stringify(response, null, 2);

    // Bootstrap and prismsjs css and js
    const handlebarCssjs = {
        bootstrap: pm.collectionVariables.get(&quot;template_cssjs_bootstrap&quot;),
        prismsjs: pm.collectionVariables.get(&quot;template_cssjs_prismjs&quot;)
    }

    // Putting everything in a single object
    // that will be passed to HandlebarJS template
    const handlebarData = {
        tweetsAndDataSources: handlebarTweetsAndDataSources,
        tweetsJson: handlebarTweetsJson,
        cssjs: handlebarCssjs
    };
console.log(handlebarData)
    // Handlebar HTML template
    const handlebarTemplate = `
        &lt;!-- CSS and JS --&gt;
        {{{cssjs.bootstrap}}}
        {{{cssjs.prismsjs}}}
        &lt;!-- Content --&gt;
        &lt;!-- Flex Container Start --&gt;
        &lt;div class=&quot;d-flex flex-column&quot; style=&quot;font-size: larger;&quot;&gt;
            {{#each tweetsAndDataSources}}
            &lt;!-- First Row Start --&gt;
            &lt;div class=&quot;d-flex flex-row mb-2&quot;&gt;
                &lt;!-- Rendered Data Card Start --&gt;
                &lt;div class=&quot;card me-2&quot; style=&quot;width:40rem;&quot;&gt;
                    &lt;h5 class=&quot;card-header&quot;&gt;Rendered Data&lt;/h5&gt;
                    &lt;div class=&quot;card-body&quot;&gt;
                        &lt;div class=&quot;d-flex flex-row align-items-stretch&quot;&gt;
                            &lt;div class=&quot;me-3&quot;&gt;
                                &lt;img src=&quot;{{tweet.author.profile_image_url}}&quot; class=&quot;rounded-circle&quot;&gt;
                            &lt;/div&gt;
                            &lt;div class=&quot;&quot;&gt;
                                &lt;h5 class=&quot;card-title&quot;&gt;{{tweet.author.name}}&lt;/h5&gt;
                                &lt;h6 class=&quot;card-subtitle mb-2 text-muted&quot;&gt;@{{tweet.author.username}}&lt;/h6&gt;
                                &lt;p class=&quot;card-text&quot; style=&quot;white-space: pre-wrap&quot;&gt;{{tweet.text}}&lt;/p&gt;
                                &lt;p class=&quot;card-text text-muted&quot;&gt;{{tweet.created_at}} - {{tweet.source}}&lt;/p&gt;
                            &lt;/div&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                &lt;/div&gt;
                &lt;!-- Rendered Data Card End --&gt;
                &lt;!-- Data Source Card Start --&gt;
                &lt;div class=&quot;card me-2 flex-grow-1&quot; &gt;
                    &lt;h5 class=&quot;card-header&quot;&gt;Data Source (JavaScript)&lt;/h5&gt;
                    &lt;div class=&quot;card-body&quot; style=&quot;background-image:linear-gradient(to bottom,#2a2139 75%,#34294f)&quot;&gt;
                        &lt;div class=&quot;d-flex flex-row align-items-stretch&quot;&gt;
                            &lt;div class=&quot;me-3&quot;&gt;
                                &lt;pre class=&quot;language-js p-0&quot; style=&quot;background: transparent !important&quot;&gt;&lt;code class=&quot;border-0 p-0&quot;&gt;{{tweetDataSource.author.profile_image_url}}&lt;/code&gt;&lt;/pre&gt;
                            &lt;/div&gt;
                            &lt;div class=&quot;&quot; &gt;
                                &lt;h5 class=&quot;card-title&quot;&gt;&lt;code class=&quot;language-js border-0&quot; style=&quot;background: transparent !important&quot;&gt;{{tweetDataSource.author.name}}&lt;/code&gt;&lt;/h5&gt;
                                &lt;h6 class=&quot;card-subtitle mb-2 text-muted&quot;&gt;@&lt;code class=&quot;language-js border-0&quot; style=&quot;background: transparent !important&quot;&gt;{{tweetDataSource.author.username}}&lt;/code&gt;&lt;/h6&gt;
                                &lt;p class=&quot;card-text&quot;&gt;&lt;code class=&quot;language-js border-0&quot; style=&quot;background: transparent !important&quot;&gt;{{tweetDataSource.text}}&lt;/code&gt;&lt;/p&gt;
                                &lt;p class=&quot;card-text text-muted&quot;&gt;&lt;code class=&quot;language-js border-0&quot; style=&quot;background: transparent !important&quot;&gt;{{tweetDataSource.created_at}}&lt;/code&gt; - &lt;code class=&quot;language-js border-0&quot; style=&quot;background: transparent !important&quot;&gt;{{data.source}}&lt;/code&gt;&lt;/p&gt;
                            &lt;/div&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                &lt;/div&gt;
                &lt;!-- Data Source Card End --&gt;
            &lt;/div&gt;
            &lt;!-- First Row End --&gt;
            {{/each}}
            &lt;!-- Second Row Start --&gt;
            &lt;div class=&quot;d-flex flex-row&quot;&gt;
                &lt;!-- Response JSON Data Card Start --&gt;
                &lt;div class=&quot;card me-2 mb-2 flex-grow-1&quot;&gt;
                    &lt;h5 class=&quot;card-header&quot;&gt;Response Data (JSON)&lt;/h5&gt;
                    &lt;div class=&quot;card-body p-0&quot;&gt;
                        &lt;pre class=&quot;m-0 p-0&quot;&gt;&lt;code class=&quot;language-json border-0&quot; style=&quot;overflow:scroll&quot;&gt;{{{tweetsJson}}}&lt;/code&gt;&lt;/pre&gt;
                    &lt;/div&gt;
                &lt;/div&gt;
                &lt;!-- Response JSON Data Card End --&gt;
            &lt;/div&gt;
            &lt;!-- Second Row End --&gt;
        &lt;/div&gt;
        &lt;!-- Flex Container End --&gt;
    `;

    // Set visualizer template and data
    pm.visualizer.set(handlebarTemplate, handlebarData);
}</code></pre>
  </div>
</div>

<p>After sending the request, click on the Visualizer button in the response to see this rendering.</p>

<div class="image ">
    <figure class="figure">
        <img src="/images/rendering-simple-text-tweets-with-their-authors/04-rendering-multiple-tweets.png" class="figure-img img-fluid" /></figure>
</div>


      </div>
    </div><!-- Next cards END -->
    
  
    
    
    <!-- Next cards -->
    <div class="card-page-section page-section-not-title">
      <div class="card-body">
      
        <h1 id="api-design-and-documentation-take-aways">API design and documentation take aways</h1>

<p>Retrieving, processing, and rendering simple text tweets should be quite simple now that you have read this tutorial. Let’s recap some interesting API design and documentation takeaways.</p>

<h2 id="api-design">API Design</h2>

<p>Here’s what we can learn from Twitter v2 API design:</p>

<ul>
  <li>Encapsulating data in a <code>data</code> (or other named) field allows adding additional data and metadata without mixing them with the “real” business/subject matter data. The Twitter API design is similar to the <a href="https://jsonapi.org/">JSON:API</a> format.</li>
  <li>Providing the possibility of selecting the field returned and the sub-ressources expanded allows to reduce data volume and also possibly reduce the response time and the load on the server-side if those data come from different subsystems. This is an approach that is quite useful but not often seen. It is similar to what the <a href="https://jsonapi.org/">JSON:API</a> format proposes.</li>
  <li>Putting the expanded sub-resources at the root level and not directly in each element allows for reducing data volumes.</li>
  <li>Always keep a balance between solving problems (data volume, response time, server loads) and bothering consumers. In the Twitter case, that balance is very good when it comes to making the link between the tweets and the expanded users.</li>
  <li>Using <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO8601</a> date format with <a href="https://en.wikipedia.org/wiki/Coordinated_Universal_Time">UTC</a> timezone is a good practice (I recommend reading this post by Jason Harmon on the topic: <a href="https://apiux.com/2013/03/20/5-laws-api-dates-and-times/">The 5 laws of API dates and times</a>)</li>
</ul>

<h2 id="api-documentation">API Documentation</h2>

<p>API documentation is often split in 2 separate types (though there are actually more, but that’s another story): reference documentation and use case documentation. We can compare the reference documentation to ingredients if the use case documentation is a recipe. With this tutorial, I tried to create the ideal use case documentation I look for when using APIs. It’s far from perfect, but it’s a good start.</p>

<p>Here are my takeaways on the topic:</p>

<ul>
  <li>Even a single operation can benefit from use-case-oriented documentation. In this case, I think it’s useful to understand how the Twitter API works globally (and avoid needless API calls, to get the tweet author for instance).</li>
  <li>Use-case-oriented documentation should not only cover how to make API calls but also how to process the returned data. That’s especially true in that case because data need to be processed to be put together (though it’s not that complicated work).</li>
  <li>When creating Postman collection-based documentation, providing several requests to show step by step how to build a complex one seems interesting. It allows explaining several features separately.</li>
  <li>Providing annotated examples of code in test scripts showing how to manipulate the returned data is also interesting.</li>
  <li>Providing a mock server returning the data needed by the request of the collection allows avoiding requiring creating an account to use the API (Twitter in this case). It has some limitations (not really possible to modify the requests) but all requests and their visualizations work.</li>
  <li>And last but not least, taking advantage of the visualizer to show in a more visual way how to manipulate the returned data looks definitely promising.</li>
</ul>

<p>I will definitely push more in those directions for my next API tutorials.</p>


      </div>
    </div><!-- Next cards END -->
    
  
    
    
    <!-- Next cards -->
    <div class="card-page-section page-section-not-title">
      <div class="card-body">
      
        <h1 id="appendices">Appendices</h1>

<h2 id="notes-about-the-collection">Notes about the collection</h2>

<p>The collection takes advantage of</p>

<ul>
  <li>Environment and collection variables</li>
  <li>Collection level Pre-Request and Test scripts</li>
  <li>Request level test scripts</li>
  <li>Response visualizers</li>
  <li>Third-party CSS and JS in the response visualizers</li>
</ul>

<h3 id="environment-variables">Environment variables</h3>

<p>The collection requires an environment containing the variables defined in the table below. You can fork the following environments:</p>

<ul>
  <li><a href="https://www.postman.com/apihandyman/workspace/twitter-v2-api-tips-and-tricks/environment/143378-4f632c31-7cc7-43bb-a0b0-1dcce3edbec9">Rendering simple text tweets with their authors Mock</a> environment: Use a mock. It’s ready to use, there’s nothing to modify. You’ll be limited to the data the mock returns and won’t be able to modify the requests but all visualizations will work.</li>
  <li><a href="https://www.postman.com/apihandyman/workspace/twitter-v2-api-tips-and-tricks/environment/143378-5d07ba2d-7410-4670-b808-03657cb2ff04">Rendering simple text tweets with their authors Production</a> environment: Use the real Twitter v2 API. It requires you to set a Twitter API bearer token (see below) but you’ll be able to choose the tweets used in the requests and modify the requests.</li>
</ul>

<div class="alert alert-danger">
  <div class="row">
    <div class="col col-auto">
      <h4 class="alert-heading" style="font-size:3rem;">⛔</h4>
    </div>
    <div class="col"><p>️Never store API tokens in initial value, use the current value. Read <a href="https://blog.postman.com/how-to-use-api-keys/">How to use API Keys</a> to learn more.</p>
</div>
  </div>
</div>

<div class="table-wrapper"><table></div>
  <thead>
    <tr>
      <th><strong>VARIABLE</strong></th>
      <th><strong>DESCRIPTION</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>api_server_basepath</td>
      <td>The server and base path of the API. For the production Twitter it’s <a href="https://api.twitter.com/2">https://api.twitter.com/2</a> and for the mock it’s <a href="https://46c813b3-7bd4-4bf7-9eac-1f56f2ccc813.mock.pstmn.io">https://46c813b3-7bd4-4bf7-9eac-1f56f2ccc813.mock.pstmn.io</a></td>
    </tr>
    <tr>
      <td>twitter_token</td>
      <td>(Only for production environment) A Twitter API bearer token (Read <a href="https://developer.twitter.com/en/docs/authentication/oauth-2-0/bearer-tokens">Twitter API documentation</a> to get one) used in Authorization tab of the collection. Without this value <a href="https://apihandyman.io/we-always-forget-to-select-a-postman-environment/">you’ll get a surprise error message</a> when sending a request.</td>
    </tr>
  </tbody>
</table></div>

<h3 id="collection-variables">Collection variables</h3>

<p>The collection uses the following collection variables in the requests:</p>

<div class="table-wrapper"><table></div>
  <thead>
    <tr>
      <th><strong>VARIABLE</strong></th>
      <th><strong>DESCRIPTION</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>tweet_id_text</td>
      <td>A real working tweet id. Feel free to update with one of your likings. To get this id, go to the Twitter website and open a tweet by clicking on it. You’ll see a URL like this one <a href="https://twitter.com/apihandyman/status/1387820661742112771">https://twitter.com/apihandyman/status/1387820661742112771</a> , the id is number number after status. Used in all requests except “Rendering a multiline tweet”.</td>
    </tr>
    <tr>
      <td>tweet_id_text_multiline</td>
      <td>The id of a multiline tweet. Feel free to update with one of your likings. To get this id, go to the Twitter website and open a tweet by clicking on it. You’ll see a URL like this one <a href="https://twitter.com/apihandyman/status/1387820661742112771">https://twitter.com/apihandyman/status/1387820661742112771</a> , the id is number number after status. Used only in the “Rendering a multiline tweet” and “Rendering multiple tweets from multiple authors” requests.</td>
    </tr>
    <tr>
      <td>tweet_id_other_author</td>
      <td>The id of a tweet of a different author than the previous ones. Feel free to update with one of your likings. To get this id, go to the Twitter website and open a tweet by clicking on it. You’ll see a URL like this one <a href="https://twitter.com/apihandyman/status/1387820661742112771">https://twitter.com/apihandyman/status/1387820661742112771</a> , the id is number number after status. Used only in the “Rendering multiple tweets from multiple authors” requests.</td>
    </tr>
  </tbody>
</table></div>

<p>There are other collection variables used by Pre-request and Test scripts that shouldn’t be modified (unless you want to break things):</p>

<div class="table-wrapper"><table></div>
  <thead>
    <tr>
      <th><strong>VARIABLE</strong></th>
      <th><strong>DESCRIPTION</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>expected_environment_variables</td>
      <td>The list of environment variable needed to make the collection work. Used by the collection level Pre-request script to avoid sending requests without the Twitter API bearer token. Look at <a href="https://apihandyman.io/we-always-forget-to-select-a-postman-environment/">this collection/post</a> to learn more about that Postman trick (though the version here is slightly modified).</td>
    </tr>
    <tr>
      <td>expected_environment_variables_defaults</td>
      <td>Contains the default values of expected_environment_variables. If you forked the environment that comes with that collection without updating the Twitter API bearer token value, the collection Pre-request script will tell you.</td>
    </tr>
    <tr>
      <td>template_cssjs_bootstrap</td>
      <td>Bootstrap CSS and JS used in the Visualizer to simply bring a beautiful style to HTML Handlebar templates. Look at <a href="https://apihandyman.io/how-to-use-bootstrap-in-postman-visualizer/">this collection/post</a> to learn more about that Postman trick.</td>
    </tr>
    <tr>
      <td>template_cssjs_prismjs</td>
      <td>PrismJS CSS and JS used to style the code samples in the HTML Handlebar templates used in the visualizer. It’s the same Postman trick as the bootstrap one (importing third party CSS and JS in Visualizer).</td>
    </tr>
  </tbody>
</table></div>

<h3 id="collection-level-pre-request-script">Collection level pre-request script</h3>

<p>The collection level pre-request script contains some code that runs before sending any of the collection’s requests. Here, it checks an environment containing appropriate variables has been selected. It takes advantage of the <code>expected_environment_variables</code> and <code>expected_environment_variables_defaults</code> collection variables for its configuration.</p>

<h3 id="collection-level-tests-script">Collection level tests script</h3>

<p>The collection level tests script contains some code that runs after any of the collection’s requests has returned. Here it checks there’s no error. Note, at the moment of writing, there’s a bug in Twitter v2 API, a <code>GET /tweets/:tweeitId</code> with a non-existing tweet id returns a <code>200 OK</code> (with an errors property) instead of a <code>404 Not Found</code>.</p>

<h3 id="request-level-tests-script">Request level tests script</h3>

<p>The request level tests script contains code that runs after the request has returned. Here, in the requests of the “Processing and rendering the data” folder, if some data is returned by the Twitter API (data field is not undefined), the data are processed and then passed to a HandlebarJS template for the visualizer.</p>

<h3 id="response-visualizer">Response visualizer</h3>

<p>The visualizer code (in request level tests scripts) takes advantage of the standard HandlebarJS templates but adds some styling with:</p>

<ul>
  <li><a href="https://getbootstrap.com/">Bootstrap</a> for general HTML styling</li>
  <li><a href="https://prismjs.com/">PrismJS</a> to highlight code snippets</li>
</ul>

<p>Check the “<a href="https://apihandyman.io/how-to-use-bootstrap-in-postman-visualizer/">How to use Bootstrap in Postman visualizer</a>” collection/post to learn more about how to use third-party CSS and JS in visualizer templates.</p>


      </div>
    </div><!-- Next cards END -->
    
  
  
</div><!-- class="page-content-text"-->

      </div>
    </div>
  </div>
</div>

<div class="row row-page-bottom-nav nav-fixed-bottom">
  <div class="container-fluid container-lg">
    <nav class="nav-page " aria-label="Page navigation">
      <a class="nav-page-btn back-to-top d-none" aria-label="back to top" data-toggle="tooltip" data-placement="right" title="Back to top"><svg height='100px' width='100px' xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 20 20" enable-background="new 0 0 20 20" xml:space="preserve"><g><polygon points="4.1,10 5.5,11.4 9,7.8 9,20 11,20 11,7.8 14.5,11.4 16,10 10,4  "></polygon><rect x="0" width="20" height="2"></rect></g></svg></a>
      
      <a class="nav-page-btn left-menu-toggler d-mobile-only" aria-label="table of content toggler" data-toggle="tooltip" data-placement="right" title="Table of content"><svg height='100px' width='100px'  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 20 20" enable-background="new 0 0 20 20" xml:space="preserve"><g><rect x="0" y="2" width="4" height="4"></rect><rect x="0" y="8" width="4" height="4"></rect><rect x="0" y="14" width="4" height="4"></rect><rect x="6" y="3" width="14" height="2"></rect><rect x="6" y="9" width="14" height="2"></rect><rect x="6" y="15" width="14" height="2"></rect></g></svg></a>
      
    </nav>
  </div>
</div>


      <div class="row row-footer-margin">

</div>
<div class="row row-footer">
  <div class="container-fluid">
    <div class="cols-12">
      <div class="container footer-content">
        <div class="row align-items-end row-cols-1 row-cols-md-2">
          <div class="col d-flex justify-content-center mb-1 mb-md-4">
            <div class="icon"><a href="https://twitter.com/apihandyman" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"/></svg></a></div>
            <div class="icon"><a href="https://www.linkedin.com/in/arnaudlauret" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"/></svg></a></div>
            <div class="icon"><a href="https://github.com/arno-di-loreto" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg></a></div>
            <div class="icon"><a href="/feed.xml" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M6.503 20.752c0 1.794-1.456 3.248-3.251 3.248-1.796 0-3.252-1.454-3.252-3.248 0-1.794 1.456-3.248 3.252-3.248 1.795.001 3.251 1.454 3.251 3.248zm-6.503-12.572v4.811c6.05.062 10.96 4.966 11.022 11.009h4.817c-.062-8.71-7.118-15.758-15.839-15.82zm0-3.368c10.58.046 19.152 8.594 19.183 19.188h4.817c-.03-13.231-10.755-23.954-24-24v4.812z"/></svg></a></div>
          </div>
          <div class="col text-center">
            <a class="btn border-0 rounded-0 p-0" data-toggle="modal" data-target="#bookModal" role="button" ><img class="img-footer-book" src="/images/commons/book/book-footer.png"></a>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="row row-footer-second">
  <div class="container-fluid">
    <div class="cols-12">
      <div class="container">
        <div class="row row-cols-1 row-cols-md-2">
          <div class="col col-footer-privacy mb-3 mb-md-0">
            <div class="icon privacy-link"><a href="/privacy"><svg height='100px' width='100px'  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve"><path d="M50.047,99.601c-27.306,0-49.521-22.212-49.521-49.521c0-18.929,11.074-36.458,28.214-44.65  c1.217-0.58,2.64-0.569,3.849,0.04c1.206,0.608,2.065,1.741,2.324,3.066c0.415,2.139,2.085,7.112,8.58,7.112  c4.537,0,6.696-2.453,7.705-4.517c0.905-1.838,2.969-2.811,4.967-2.316c1.995,0.495,3.378,2.305,3.323,4.359  c-0.085,3.344,0.842,6.343,2.483,8.033c2.176,2.23,5.94,2.379,10.952,0.581c1.832-0.66,3.88-0.023,5.016,1.559  c1.142,1.576,1.099,3.716-0.103,5.251c-1.906,2.436-2.086,6.014-0.467,9.335c1.923,3.949,5.775,6.305,10.304,6.305  c1.951,0,3.676-0.421,5.273-1.28c1.31-0.705,2.879-0.701,4.182,0.011c1.3,0.717,2.148,2.042,2.253,3.521l0.04,0.541  c0.074,1.013,0.146,2.019,0.146,3.049C99.567,77.389,77.354,99.601,50.047,99.601z M28.271,15.665  C16.59,23.079,9.266,36.118,9.266,50.08c0,22.49,18.294,40.782,40.781,40.782c21.588,0,39.313-16.864,40.697-38.108  c-1.003,0.148-2.025,0.223-3.07,0.223c-7.831,0-14.789-4.296-18.161-11.213c-1.59-3.267-2.216-6.731-1.908-10.021  c-0.248,0.006-0.491,0.012-0.734,0.012h-0.002c-4.461,0-8.316-1.542-11.154-4.449c-1.385-1.429-2.51-3.175-3.335-5.149  c-2.568,1.457-5.583,2.23-8.886,2.23C36.768,24.387,31.232,21.099,28.271,15.665z"></path><path d="M95.928,10.027c0,2.014-1.632,3.641-3.643,3.641c-2.012,0-3.641-1.627-3.641-3.641  c0-2.008,1.629-3.641,3.641-3.641C94.296,6.386,95.928,8.019,95.928,10.027z"></path><circle cx="28.686" cy="39.356" r="6.19"></circle><circle cx="33.175" cy="63.672" r="6.19"></circle><circle cx="55.873" cy="71.444" r="6.19"></circle><circle cx="53.093" cy="46.723" r="6.19"></circle><path d="M78.326,7.604c0,3.146-2.554,5.7-5.704,5.7c-3.148,0-5.702-2.554-5.702-5.7c0-3.152,2.554-5.707,5.702-5.707  C75.772,1.896,78.326,4.452,78.326,7.604z"></path><circle cx="93.014" cy="29.325" r="4.006"></circle></svg><span class="privacy-link-text">Privacy Policy & Settings<span></span></a></div>
          </div>
          <div class="col col-footer-copyright">
            &copy; 2015-2022 Arnaud Lauret
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
            <!-- Modal -->
      <div class="modal fade" id="bookModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg modal-dialog-book" role="document">
          <div class="modal-content border-0">
            <div class="modal-body p-0">
              <div class="container-fluid p-0">
                <button type="button" class="close pr-2 pt-1" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
                <div class="row modal-book-cover-center"></div>
                <div class="row mb-3 mb-lg-0 ml-0 mr-0 pt-3 pt-md-0">
                  <div class="col col-lg-4 d-none d-md-block p-0">
                    <img class="img-fluid" src="/images/commons/book/book-modal.png"/>
                  </div>
                  <div class="col col-12 col-lg-8 pt-2 pt-lg-4 text-justify">
                    <p>Want to learn how to design simple, user friendly, secure and implementable APIs that do everything they should?</p>
                    <p>Use code <code class="book-discount-code text-copy" aria-label="copy discount code" data-toggle="tooltip" data-placement="top" title="" data-original-title="Click to copy">fcclauret</code> to get 37% off my book The Design of Web APIs (works also on any other Manning product!).</p>
                    <p class="text-center"><a href="http://bit.ly/designwebapis" target="_blank" class="btn btn-primary">Buy on manning.com</a></p>
                    <p class="text-muted pt-3 mb-0">Disclosure: the link above is an affiliated link, meaning, at no additional cost to you, I will earn a commission if you click through and make a purchase.</p>
                  </div> 
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      

<div class="privacy-message d-none fixed-bottom container-fluid bg-dark text-white p-3">
  <div class="container">
    <div class="row text-center pt-2 pb-3 d-block d-sm-block d-md-none">
      <div class="col">
        <span class="icon-inline privacy-message-icon" aria-label="cookie button icon"><svg height='100px' width='100px'  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve"><path d="M50.047,99.601c-27.306,0-49.521-22.212-49.521-49.521c0-18.929,11.074-36.458,28.214-44.65  c1.217-0.58,2.64-0.569,3.849,0.04c1.206,0.608,2.065,1.741,2.324,3.066c0.415,2.139,2.085,7.112,8.58,7.112  c4.537,0,6.696-2.453,7.705-4.517c0.905-1.838,2.969-2.811,4.967-2.316c1.995,0.495,3.378,2.305,3.323,4.359  c-0.085,3.344,0.842,6.343,2.483,8.033c2.176,2.23,5.94,2.379,10.952,0.581c1.832-0.66,3.88-0.023,5.016,1.559  c1.142,1.576,1.099,3.716-0.103,5.251c-1.906,2.436-2.086,6.014-0.467,9.335c1.923,3.949,5.775,6.305,10.304,6.305  c1.951,0,3.676-0.421,5.273-1.28c1.31-0.705,2.879-0.701,4.182,0.011c1.3,0.717,2.148,2.042,2.253,3.521l0.04,0.541  c0.074,1.013,0.146,2.019,0.146,3.049C99.567,77.389,77.354,99.601,50.047,99.601z M28.271,15.665  C16.59,23.079,9.266,36.118,9.266,50.08c0,22.49,18.294,40.782,40.781,40.782c21.588,0,39.313-16.864,40.697-38.108  c-1.003,0.148-2.025,0.223-3.07,0.223c-7.831,0-14.789-4.296-18.161-11.213c-1.59-3.267-2.216-6.731-1.908-10.021  c-0.248,0.006-0.491,0.012-0.734,0.012h-0.002c-4.461,0-8.316-1.542-11.154-4.449c-1.385-1.429-2.51-3.175-3.335-5.149  c-2.568,1.457-5.583,2.23-8.886,2.23C36.768,24.387,31.232,21.099,28.271,15.665z"></path><path d="M95.928,10.027c0,2.014-1.632,3.641-3.643,3.641c-2.012,0-3.641-1.627-3.641-3.641  c0-2.008,1.629-3.641,3.641-3.641C94.296,6.386,95.928,8.019,95.928,10.027z"></path><circle cx="28.686" cy="39.356" r="6.19"></circle><circle cx="33.175" cy="63.672" r="6.19"></circle><circle cx="55.873" cy="71.444" r="6.19"></circle><circle cx="53.093" cy="46.723" r="6.19"></circle><path d="M78.326,7.604c0,3.146-2.554,5.7-5.704,5.7c-3.148,0-5.702-2.554-5.702-5.7c0-3.152,2.554-5.707,5.702-5.707  C75.772,1.896,78.326,4.452,78.326,7.604z"></path><circle cx="93.014" cy="29.325" r="4.006"></circle></svg></span>
      </div>
    </div>
    <div class="row">
      <div class="col-auto align-self-center d-none d-sm-none d-md-block">
        <span class="icon-inline privacy-message-icon" aria-label="cookie button icon"><svg height='100px' width='100px'  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve"><path d="M50.047,99.601c-27.306,0-49.521-22.212-49.521-49.521c0-18.929,11.074-36.458,28.214-44.65  c1.217-0.58,2.64-0.569,3.849,0.04c1.206,0.608,2.065,1.741,2.324,3.066c0.415,2.139,2.085,7.112,8.58,7.112  c4.537,0,6.696-2.453,7.705-4.517c0.905-1.838,2.969-2.811,4.967-2.316c1.995,0.495,3.378,2.305,3.323,4.359  c-0.085,3.344,0.842,6.343,2.483,8.033c2.176,2.23,5.94,2.379,10.952,0.581c1.832-0.66,3.88-0.023,5.016,1.559  c1.142,1.576,1.099,3.716-0.103,5.251c-1.906,2.436-2.086,6.014-0.467,9.335c1.923,3.949,5.775,6.305,10.304,6.305  c1.951,0,3.676-0.421,5.273-1.28c1.31-0.705,2.879-0.701,4.182,0.011c1.3,0.717,2.148,2.042,2.253,3.521l0.04,0.541  c0.074,1.013,0.146,2.019,0.146,3.049C99.567,77.389,77.354,99.601,50.047,99.601z M28.271,15.665  C16.59,23.079,9.266,36.118,9.266,50.08c0,22.49,18.294,40.782,40.781,40.782c21.588,0,39.313-16.864,40.697-38.108  c-1.003,0.148-2.025,0.223-3.07,0.223c-7.831,0-14.789-4.296-18.161-11.213c-1.59-3.267-2.216-6.731-1.908-10.021  c-0.248,0.006-0.491,0.012-0.734,0.012h-0.002c-4.461,0-8.316-1.542-11.154-4.449c-1.385-1.429-2.51-3.175-3.335-5.149  c-2.568,1.457-5.583,2.23-8.886,2.23C36.768,24.387,31.232,21.099,28.271,15.665z"></path><path d="M95.928,10.027c0,2.014-1.632,3.641-3.643,3.641c-2.012,0-3.641-1.627-3.641-3.641  c0-2.008,1.629-3.641,3.641-3.641C94.296,6.386,95.928,8.019,95.928,10.027z"></path><circle cx="28.686" cy="39.356" r="6.19"></circle><circle cx="33.175" cy="63.672" r="6.19"></circle><circle cx="55.873" cy="71.444" r="6.19"></circle><circle cx="53.093" cy="46.723" r="6.19"></circle><path d="M78.326,7.604c0,3.146-2.554,5.7-5.704,5.7c-3.148,0-5.702-2.554-5.702-5.7c0-3.152,2.554-5.707,5.702-5.707  C75.772,1.896,78.326,4.452,78.326,7.604z"></path><circle cx="93.014" cy="29.325" r="4.006"></circle></svg></span>
      </div>
      <div class="col text-justify">
        By continuing to use this web site you agree with the API Handyman website privacy policy (effective date , June 28, 2020).
      </div>
      <div class="col-auto align-self-center d-none d-sm-none d-md-block">
          <a class="btn btn-primary" href="/privacy/">Read privacy policy</a>
          <a class="btn btn-primary" onclick="javascript:acceptPrivacyPolicy()">Happy with that</a>
      </div>
    </div>
    <div class="row text-center pt-3 d-block d-sm-block d-md-none">
      <div class="col">
        <a class="btn btn-primary" href="/privacy/">Read privacy policy</a>
        <a class="btn btn-primary" onclick="javascript:acceptPrivacyPolicy()">Happy with that</a>
      </div>
    </div>
  </div>
</div>
    </div>
    
  
    
    
      















  
  
    
    
      








  
  













  
  
<script type="text/javascript" src="/js/jquery-3.4.1.slim.min.js" ></script>



    
  




















  
  
<script type="text/javascript" src="/js/popper.min.js" ></script>
<script type="text/javascript" src="/js/bootstrap.min.js" ></script>



    
  

  
    
    
      










  
  















  
  
<script type="text/javascript" src="/js/anchor.min.js" ></script>
<script type="text/javascript" src="/js/anchors.js" ></script>



    
  

  

  
    
    
      








  
  













  
  
<script type="text/javascript" src="/js/clipboard.min.js" ></script>



    
  

  

  

  
    
    
      










  
  















  
  
<script type="text/javascript" src="/js/main.js" ></script>



    
  

  
    
    
      












  
  
    
    
  
    
    
      










  
  















  
  
<script type="text/javascript" src="/js/prism.js" ></script>



    
  
    
    
      










  
  















  
  
<script type="text/javascript" src="/js/asciinema-player.js" ></script>



    
  
    
    
  

















  
  
<script type="text/javascript" src="/js/code.js" ></script>



    
  

  
    
    
      












  
  
    
    
  
    
    
  
    
    
      










  
  
    
    
  















  
  
<div id="device-size-detector">
  <div id="xs" class="d-xs-only"></div>
  <div id="sm" class="d-sm-only"></div>
  <div id="md" class="d-md-only"></div>
  <div id="lg" class="d-lg-only"></div>
  <div id="xl" class="d-xl-only"></div>
</div>
<script type="text/javascript" src="/js/size.js" ></script>



    
  

















  
  
<script type="text/javascript" src="/js/bash.js" ></script>



    
  

  
    
    
      










  
  
    
    
  















  
  
<script type="text/javascript" src="/js/toc.js" ></script>



    
  

  

  
    
    
      










  
  
    
    
      








  
  













  
  
<script type="text/javascript" src="/js/fingerprint2.min.js" ></script>



    
  















  
  
<script type="text/javascript" src="/js/google-analytics.js" ></script>



    
  

  

  

  

  
    
    
      









  
  














  
  
<script type="text/javascript" src="/js/search-bar.js" ></script>



    
  

  


  </body>
</html>